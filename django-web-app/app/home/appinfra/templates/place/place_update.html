{% extends 'base.html' %}

{% block content %}
  <h1>Site</h1>

  <form action="" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input class="styled" type="submit" value="Enregistrer">
  </form>

  <form id="deleteForm" action="" method="post" style="margin-top: 20px;">
    {% csrf_token %}
    <input type="hidden" name="delete" value="true">
    <input class="styled_3" type="button" value="Supprimer ce site" onclick="confirmDeletion();">
  </form>

  <style>
    .swal2-popup .swal2-icon {
        margin: 0 auto;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="text/javascript">
    function confirmDeletion() {
      Swal.fire({
        title: 'Êtes-vous sûr ?',
        text: "Vous ne pourrez pas revenir en arrière !",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Oui, supprimer !',
        cancelButtonText: 'Annuler'
      }).then((result) => {
        if (result.isConfirmed) {
          document.getElementById('deleteForm').submit();
        }
      });
    }
  </script>

  <hr>

  <h1>Information sur l'entreprise</h1>

  <div class="accordion" id="accordionExample">
      <div class="card">
          <div class="card-header" id="headingOne">
              <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      Equipement de l'entreprise :
                  </button>
              </h2>
          </div>

          <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
              <div class="card-body">
                {%url 'place_equipments' this.id as ajax_url_tmp%}
                {%include "widget_ajax.html" with ajax_url=ajax_url_tmp ajax_divname='place_equipments' ajax_spinner=1%}
              </div>
          </div>
      </div>
      <div class="card">
          <div class="card-header" id="headingTwo">
              <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                      Réseau de l'entreprise :
                  </button>
              </h2>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
              <div class="card-body">
                  {%url 'place_networks' this.id as ajax_url_tmp%}
                  {%include "widget_ajax.html" with ajax_url=ajax_url_tmp ajax_divname='place_networks' ajax_spinner=1%}
              </div>
          </div>
      </div>
  </div>

{% endblock %}

</body>
</html>
